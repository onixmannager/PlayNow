<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reproducción Automática</title>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background-color: black;
    }
    #player {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
    audio {
      display: none;
    }
  </style>
</head>
<body>

  <!-- Contenedor para el reproductor de video -->
  <div style="position:relative; width:100%; height:0px; padding-bottom:177.778%">
    <iframe id="video" allow="fullscreen" allowfullscreen height="100%" 
            src="https://streamable.com/e/ytg9h7?nocontrols=1" width="100%" 
            style="border:none; width:100%; height:100%; position:absolute; left:0px; top:0px; overflow:hidden;">
    </iframe>
  </div>

  <!-- Contenedor para el audio -->
  <audio id="audio" preload="auto">
    <source src="https://raw.githubusercontent.com/tuusuario/tu-repo/main/tu-audio.mp3" type="audio/mp3">
    Tu navegador no soporta el elemento de audio.
  </audio>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
        let audio = document.getElementById('audio');

        function tryPlay() {
            audio.play().then(() => {
                console.log("Audio reproducido automáticamente.");
            }).catch(error => {
                console.log("Intento fallido, reintentando...", error);
            });
        }

        // 1. Intentar forzar la reproducción mediante un evento de clic manual
        function dispatchRealClick() {
            let clickEvent = new MouseEvent('click', {
                view: window,
                bubbles: true,
                cancelable: true
            });
            document.body.dispatchEvent(clickEvent);
            tryPlay();
        }

        // 2. Usar requestAnimationFrame para intentar reproducir múltiples veces
        function tryUnlock() {
            requestAnimationFrame(() => {
                dispatchRealClick();
            });
        }

        // 3. Registrar eventos táctiles y de interacción
        document.addEventListener("touchstart", tryPlay);
        document.addEventListener("mousedown", tryPlay);

        // 4. Reintentar cada 500ms hasta que el audio se reproduzca
        let interval = setInterval(() => {
            if (!audio.paused) {
                clearInterval(interval);
            } else {
                tryUnlock();
            }
        }, 500);

        // 5. Llamada inicial para activar la secuencia
        tryUnlock();
    });
  </script>

</body>
</html>
