<!DOCTYPE html>
<html lang="es">  
<head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <title>Historia Interactiva</title>  
  <style>  
    /* Todos los estilos se mantienen igual */  
    body, html {  
      margin: 0;  
      padding: 0;  
      height: 100%;  
      width: 100%;  
      overflow: hidden;  
      display: flex;  
      flex-direction: column;  
      align-items: center;  
      justify-content: center;  
      background-color: black;  
    }  
    #player {  
      position: absolute;  
      top: 0;  
      left: 0;  
      width: 100%;  
      height: 100%;  
      z-index: 0;  
    }  
    #overlay {  
      position: absolute;  
      top: 0;  
      left: 0;  
      width: 100%;  
      height: 100%;  
      background-color: rgba(0, 0, 0, 1);  
      z-index: 1;  
    }  
    button {  
      position: relative;  
      z-index: 2;  
      padding: 12px 25px;  
      font-size: 18px;  
      cursor: pointer;  
      background: linear-gradient(145deg, #1a1a1a, #2d2d2d);  
      color: #00ff00;  
      border: 2px solid #00ff00;  
      border-radius: 3px;  
      text-transform: uppercase;  
      letter-spacing: 2px;  
      font-family: Arial, sans-serif;  
      text-shadow: 0 0 8px rgba(0, 255, 0, 0.5);  
      box-shadow: 0 0 15px rgba(0, 255, 0, 0.3),  
                  inset 0 0 10px rgba(0, 255, 0, 0.2);  
      transition: all 0.3s ease;  
      margin: 0 10px;  
      opacity: 0;  
      pointer-events: none;  
    }  
    #buttonContainer {  
      position: absolute;  
      bottom: 50px;  
      left: 50%;  
      transform: translateX(-50%);  
      display: none;  
      z-index: 2;  
      gap: 20px;  
      flex-wrap: wrap;  
      justify-content: center;  
      max-width: 90%;  
    }  
    .hidden {  
      display: none !important;  
    }  
    /* Estilos para el modal de código */  
    #codigoModal {  
      display: none;  
      position: fixed;  
      top: 0;  
      left: 0;  
      width: 100%;  
      height: 100%;  
      background: rgba(0, 0, 0, 0.8);  
      z-index: 3;  
      justify-content: center;  
      align-items: center;  
    }  
    #codigoModalContent {  
      background: #000;  
      padding: 20px;  
      border: 2px solid #00ff00;  
      text-align: center;  
    }  
    #codigoModalContent h2 {  
      color: #00ff00;  
      margin-bottom: 20px;  
    }  
    #codigoInput {  
      padding: 10px;  
      font-size: 18px;  
      text-align: center;  
      width: 100px;  
      margin-bottom: 20px;  
      border: 2px solid #00ff00;  
      background: #000;  
      color: #00ff00;  
    }  
    #codigoAceptar {  
      padding: 10px 20px;  
      font-size: 18px;  
      cursor: pointer;  
      background: linear-gradient(145deg, #1a1a1a, #2d2d2d);  
      color: #00ff00;  
      border: 2px solid #00ff00;  
      border-radius: 3px;  
      text-transform: uppercase;  
      letter-spacing: 2px;  
      font-family: Arial, sans-serif;  
      text-shadow: 0 0 8px rgba(0,255,0,0.5);  
    }  
  </style>  
</head>  
<body>  
  <div id="overlay"></div>  
  <div id="player">  
    <iframe id="videoPlayer" allow="autoplay" allowfullscreen height="100%"   
            width="100%"   
            style="border:none; width:100%; height:100%; position:absolute; left:0; top:0; overflow:hidden;">  
    </iframe>  
  </div>  
  <button id="playButton">Ayudar a Kilua</button>
  <button id="unmuteButton">Activar Sonido</button>

  <div id="buttonContainer">  
    <button class="loadAnotherButton" data-url="escena1-ordenador.html">Volver Atrás y Revisar Ordenador</button>  
    <button class="loadAnotherButton" data-url="escena1-rejilla-palanca1.html">Mover Palanca</button>  
    <button class="loadAnotherButton" data-url="escena1-codigo.html">Insertar Codigo</button>  
  </div>    

  <!-- Modal para ingresar código de 4 cifras -->    
  <div id="codigoModal">  
    <div id="codigoModalContent">  
      <h2>Introduce el código</h2>  
      <input id="codigoInput" type="text" maxlength="4" placeholder="####">  
      <br>  
      <button id="codigoAceptar">Aceptar</button>  
    </div>  
  </div>    

  <script>
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll(".loadAnotherButton").forEach(button => {
      button.addEventListener("click", function() {
        if (this.dataset.url === "escena1-codigo.html") {
          document.getElementById('codigoModal').style.display = 'flex';
        } else {
          window.location.href = this.dataset.url;
        }
      });
    });

    document.getElementById('codigoAceptar').addEventListener('click', function() {
      const code = document.getElementById('codigoInput').value;

      if (code === "5442") {
        mostrarCodigoCorrecto();
      } else {
        mostrarCodigoErroneo();
      }
    });

    function mostrarCodigoCorrecto() {
      let successModal = document.createElement("div");
      successModal.id = "successModal";
      successModal.style.position = "fixed";
      successModal.style.top = "0";
      successModal.style.left = "0";
      successModal.style.width = "100%";
      successModal.style.height = "100%";
      successModal.style.background = "rgba(0, 255, 0, 0.8)";
      successModal.style.display = "flex";
      successModal.style.justifyContent = "center";
      successModal.style.alignItems = "center";
      successModal.style.zIndex = "4";

      let successContent = document.createElement("div");
      successContent.style.background = "#000";
      successContent.style.padding = "20px";
      successContent.style.border = "2px solid #00ff00";
      successContent.style.textAlign = "center";
      successContent.innerHTML = "<h2 style='color: #00ff00;'>¡CÓDIGO CORRECTO!</h2>";

      successModal.appendChild(successContent);
      document.body.appendChild(successModal);

      document.getElementById('codigoModal').style.display = 'none';

      setTimeout(() => {
        document.body.removeChild(successModal);
        window.location.href = "escena1-tunel-giro.html";
      }, 2000);
    }

    function mostrarCodigoErroneo() {
      alert("Código incorrecto. Intenta de nuevo.");
    }
  });
  </script>

</body>
</html>
